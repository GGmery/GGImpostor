<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGImpostor</title>
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <link rel="stylesheet" href="styles.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>

    <div class="theme-toggle">
        <input type="checkbox" id="toggleTheme" class="toggle-checkbox">
        <label for="toggleTheme" class="toggle-label">
            <span class="toggle-ball"></span>
        </label>
    </div>

    <div id="menu-inicio">
        <div class="inicio-header">
            <div class="logo-container">
                <h1 class="logo-title">
                    <span class="logo-gg">GG</span><span class="logo-impostor">Impostor</span>
                </h1>
                <p class="logo-subtitle">üïµÔ∏è ¬øQui√©n es el impostor?</p>
            </div>
        </div>
        
        <div class="inicio-form">
            <div class="input-group">
                <label class="input-label">üë§ Tu nombre</label>
                <input type="text" id="nombreInput" placeholder="Escribe tu nombre aqu√≠">
            </div>
            
            <div class="personajes-section">
                <p class="label-text">‚ú® Elige tu personaje:</p>
                <div id="selector-personajes">
                    <div class="personaje" data-icon="1" data-color="#bb44ff" onclick="seleccionarPersonaje('1')">
                        <img src="assets/icon (1).png" alt="Personaje 1" class="personaje-avatar" style="border-color: #bb44ff;">
                    </div>
                    <div class="personaje" data-icon="2" data-color="#4444ff" onclick="seleccionarPersonaje('2')">
                        <img src="assets/icon (2).png" alt="Personaje 2" class="personaje-avatar" style="border-color: #4444ff;">
                    </div>
                    <div class="personaje" data-icon="3" data-color="#44ff44" onclick="seleccionarPersonaje('3')">
                        <img src="assets/icon (3).png" alt="Personaje 3" class="personaje-avatar" style="border-color: #44ff44;">
                    </div>
                    <div class="personaje" data-icon="4" data-color="#ff4444" onclick="seleccionarPersonaje('4')">
                        <img src="assets/icon (4).png" alt="Personaje 4" class="personaje-avatar" style="border-color: #ff4444;">
                    </div>
                    <div class="personaje" data-icon="5" data-color="#ffff44" onclick="seleccionarPersonaje('5')">
                        <img src="assets/icon (5).png" alt="Personaje 5" class="personaje-avatar" style="border-color: #ffff44;">
                    </div>
                    <div class="personaje" data-icon="6" data-color="#ff8844" onclick="seleccionarPersonaje('6')">
                        <img src="assets/icon (6).png" alt="Personaje 6" class="personaje-avatar" style="border-color: #ff8844;">
                    </div>
                    <div class="personaje" data-icon="7" data-color="#ff44aa" onclick="seleccionarPersonaje('7')">
                        <img src="assets/icon (7).png" alt="Personaje 7" class="personaje-avatar" style="border-color: #ff44aa;">
                    </div>
                    <div class="personaje" data-icon="8" data-color="#44ffff" onclick="seleccionarPersonaje('8')">
                        <img src="assets/icon (8).png" alt="Personaje 8" class="personaje-avatar" style="border-color: #44ffff;">
                    </div>
                </div>
            </div>
            
            <button class="btn-primary" onclick="crearPartida()">
                <span class="btn-icon">üéÆ</span>
                <span>Crear Nueva Sala</span>
            </button>
            
            <div class="divider">
                <span>o</span>
            </div>
            
            <div class="unirse-section">
                <p class="unirse-text">¬øTienes un c√≥digo de sala?</p>
                <div class="input-group">
                    <input type="text" id="codigoInput" placeholder="Ej: A4X1" class="codigo-input">
                </div>
                <button class="btn-secondary" onclick="unirsePartida()">
                    <span class="btn-icon">üö™</span>
                    <span>Unirse a Sala</span>
                </button>
            </div>
        </div>
    </div>

    <div id="sala-espera" style="display: none;">
        <h2>C√≥digo de Sala:</h2>
        <span id="mostrarCodigo">----</span>
        
        <div id="lista-jugadores"></div>

        <button id="btnIniciar" style="display: none;" onclick="iniciarJuego()">¬°Empezar Juego!</button>
        <p id="esperandoTexto" style="font-size: 0.8rem; color: #71717a;">Esperando a que el l√≠der empiece...</p>
    </div>

    <!-- Pantalla de Juego -->
    <div id="pantalla-juego" style="display: none;">
        <div class="game-table-container">
            <!-- Jugadores alrededor de la mesa -->
            <div class="mesa-jugadores" id="mesaJugadores"></div>
            
            <!-- √Årea central de la mesa -->
            <div class="mesa-central">
                <div class="info-turno">
                    <div class="timer" id="timer">1:00</div>
                    <p class="timer-label" id="timerLabel">Turno de:</p>
                    <p class="jugador-actual" id="jugadorActual"></p>
                </div>
                
                <!-- Tu informaci√≥n -->
                <div class="tu-info-mesa">
                    <img id="tuAvatar" src="" alt="Tu personaje" class="avatar-mesa">
                    <div class="tu-datos">
                        <h3 id="tuNombre"></h3>
                        <p id="tuRol" class="rol-badge"></p>
                    </div>
                </div>
                
                <!-- √Årea de escritura -->
                <div class="area-escritura-mesa">
                    <textarea id="textoJugador" placeholder="Escribe tu mensaje..." maxlength="500" disabled></textarea>
                    <button id="btnEnviarTexto" onclick="enviarTexto()" style="display: none;">Enviar</button>
                </div>
            </div>
        </div>
        
        <!-- Historial de mensajes (fuera de la mesa) -->
        <div class="historial-mensajes-lateral" id="historialMensajes">
            <h4>üí¨ Mensajes</h4>
            <div id="listaMensajes"></div>
        </div>
    </div>

    <!-- Pantalla de Decisi√≥n (Otra Ronda o Votar) -->
    <div id="pantalla-decision" style="display: none;">
        <h2>¬øQu√© quer√©is hacer?</h2>
        <p style="font-size: 1rem; margin-bottom: 30px; color: #888;">Votad para decidir el siguiente paso</p>
        <div class="timer-votacion" id="timerDecision">0:30</div>
        
        <div class="opciones-decision">
            <div class="opcion-decision" onclick="votarDecision('otra-ronda')">
                <div class="icono-decision">üîÑ</div>
                <h3>Otra Ronda</h3>
                <p>Seguir escribiendo palabras</p>
            </div>
            <div class="opcion-decision" onclick="votarDecision('votar-impostor')">
                <div class="icono-decision">üó≥Ô∏è</div>
                <h3>Votar Impostor</h3>
                <p>Pasar a la votaci√≥n</p>
            </div>
        </div>
        
        <div class="resultado-decision" id="resultadoDecision" style="display: none;"></div>
    </div>

    <!-- Pantalla de Votaci√≥n -->
    <div id="pantalla-votacion" style="display: none;">
        <h2>¬øQui√©n es el Impostor?</h2>
        <div class="timer-votacion" id="timerVotacion">1:00</div>
        
        <div class="opciones-voto" id="opcionesVoto"></div>
        
        <div class="resultados-votacion" id="resultadosVotacion" style="display: none;">
            <button id="btnReiniciar" style="display: none;" onclick="reiniciarPartida()">üîÑ Jugar de Nuevo</button>
        </div>
    </div>

    <!-- Bot√≥n de Ayuda -->
    <button id="btnAyuda" class="help-button" title="¬øC√≥mo se juega?" onclick="mostrarAyuda()">
        ‚ùì
    </button>

    <!-- Modal de Ayuda -->
    <div id="modalAyuda" class="modal" onclick="cerrarAyuda(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="cerrarAyuda()">&times;</span>
            <h2>¬øC√ìMO JUGAR AL IMPOSTOR? üïµÔ∏è‚Äç‚ôÇÔ∏è</h2>
            
            <div class="ayuda-seccion">
                <h3>1. El Secreto</h3>
                <p>Al empezar, todos recibir√°n una <strong>Palabra Secreta</strong>, excepto uno: <strong>El Impostor</strong>. El Impostor no sabe cu√°l es la palabra, pero ver√° la categor√≠a (ej. Animales).</p>
            </div>
            
            <div class="ayuda-seccion">
                <h3>2. La Fase de Juego</h3>
                <p>Cada jugador debe escribir una sola palabra que est√© relacionada con la secreta.</p>
                <ul>
                    <li><strong>Si conoces la palabra:</strong> No seas demasiado obvio o el Impostor la adivinar√°.</li>
                    <li><strong>Si eres el Impostor:</strong> ¬°Finge! Lee lo que ponen los dem√°s e intenta poner algo que encaje para no ser descubierto.</li>
                </ul>
            </div>
            
            <div class="ayuda-seccion">
                <h3>3. La Votaci√≥n</h3>
                <p>Despu√©s de que todos hayan participado, llega el debate. Discutid qui√©n ha puesto la palabra m√°s sospechosa y votad para expulsar al que cre√°is que es el Impostor.</p>
            </div>
            
            <div class="ayuda-seccion">
                <h3>4. ¬øQui√©n gana?</h3>
                <ul>
                    <li><strong>Los Jugadores:</strong> Ganan si identifican al Impostor.</li>
                    <li><strong>El Impostor:</strong> Gana si no es descubierto o si, al ser pillado, logra adivinar cu√°l era la Palabra Secreta.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Control de Volumen -->
    <div class="volume-control">
        <span class="volume-icon">üîä</span>
        <input type="range" id="volumeSlider" min="0" max="100" value="50" class="volume-slider">
        <span class="volume-percentage">50%</span>
    </div>

    <!-- Audio Player (oculto) -->
    <audio id="gameMusic" loop></audio>

    <script src="game.js"></script>
</body>
</html>